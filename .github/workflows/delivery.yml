on:
  release:
    types: [released]
name: CD
jobs:
    delivery:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v2
          with:
            # Disabling shallow clone is recommended for improving relevancy of reporting
            fetch-depth: 0

        - uses: actions/setup-node@v2
          with:
            node-version: '12'

        - run: npm install
          name: "Install dependencies"

        - run: npm test
          name: "Test"

        - run: npm publish --access public
          env:
            NODE_AUTH_TOKEN: ${{secrets.NPM_AUTH_TOKEN}}
